version: '3.8'

services:
  # --- BACKEND ---
  api:
    # MANTENEMOS: El comando de desarrollo (para que escuche en puerto 8000)
    command: php artisan serve --host=0.0.0.0 --port=8000
    
    # MANTENEMOS: Variables de entorno de dev
    environment:
      APP_ENV: local
      APP_DEBUG: true
    
    # ELIMINAMOS/COMENTAMOS: Los volúmenes de código fuente
    # volumes:
    #   - ./backend:/var/www/html

  # --- FRONTEND ---
  frontend:
    # MANTENEMOS: Vite en modo desarrollo
    command: npm run dev -- --host
    
    # ELIMINAMOS/COMENTAMOS: Los volúmenes de código
    # volumes:
    #   - ./frontend:/app
    #   - /app/node_modules

  # --- AI WORKER ---
  ai_worker:
    # ELIMINAMOS/COMENTAMOS: Volúmenes de código
    # volumes:
    #   - ./ai_engine:/app
    environment:
      PYTHONUNBUFFERED: 1
    # Opcional: Si usas Label Studio en dev, déjalo aquí
    # ports:
      # - "8081:8080"